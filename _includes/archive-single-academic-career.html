{% include base_path %}

{% if include.post %}
  {% assign post = include.post %}
{% endif %}

{% assign is_current = false %}
{% if post.end_date == "Present" %}
  {% assign is_current = true %}
{% endif %}

<div class="timeline-item {% if is_current %}current-timeline-item{% endif %}">
  <div class="timeline-marker"></div>
  <article class="academic-card" itemscope itemtype="http://schema.org/CreativeWork">
    <div class="academic-header">
      {% if post.logo %}
      <div class="academic-logo">
        <img src="{{ post.logo | prepend: '/images/' | prepend: base_path }}" alt="{{ post.company }} logo">
      </div>
      {% endif %}
      
      <div class="academic-content">
        <h3 class="academic-title" itemprop="headline">
          {% if post.permalink %}
            <a href="{{ post.permalink | relative_url }}" rel="permalink">{{ post.title }}</a>
          {% else %}
            {{ post.title }}
          {% endif %}
        </h3>
        
        <div class="academic-meta">
          <span class="employment-type">{{ post.employment_type }}</span>
          <span class="separator">at</span>
          <span class="company">{{ post.company }}</span>
        </div>
        
        <div class="experience-details">
          <span class="dates">
            <i class="fas fa-calendar-alt" style="opacity: 0.7; margin-right: 4px;"></i>
            {{ post.start_date | date: "%b %Y" }} - 
            {% if post.end_date == "Present" %}
              <span style="color: #2ecc71; font-weight: bold;">Present</span>
            {% else %}
              {{ post.end_date | date: "%b %Y" }}
            {% endif %}
          </span>
          <span class="separator">â€¢</span>
          <span class="location">{{ post.location }}</span>
        </div>
      </div>
    </div>
  </article>
</div>